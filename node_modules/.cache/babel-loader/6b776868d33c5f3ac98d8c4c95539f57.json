{"ast":null,"code":"\"use strict\";\n\n(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = factory();\n  } else {\n    global.CBOR = factory();\n  }\n})(this, function () {\n  const {\n    DataItem\n  } = require('./DataItem');\n\n  var CBOR = function () {\n    function BinaryHex(hex) {\n      this.$hex = hex;\n    }\n\n    BinaryHex.prototype = {\n      length: function () {\n        return this.$hex.length / 2;\n      },\n      toString: function (format) {\n        if (!format || format === 'hex' || format === 16) return this.$hex;\n\n        if (format === 'utf-8') {\n          var encoded = '';\n\n          for (var i = 0; i < this.$hex.length; i += 2) {\n            encoded += '%' + this.$hex.substring(i, i + 2);\n          }\n\n          return decodeURIComponent(encoded);\n        }\n\n        if (format === 'latin') {\n          var encoded = [];\n\n          for (var i = 0; i < this.$hex.length; i += 2) {\n            encoded.push(parseInt(this.$hex.substring(i, i + 2), 16));\n          }\n\n          return String.fromCharCode.apply(String, encoded);\n        }\n\n        throw new Error('Unrecognised format: ' + format);\n      }\n    };\n\n    BinaryHex.fromLatinString = function (latinString) {\n      var hex = '';\n\n      for (var i = 0; i < latinString.length; i++) {\n        var pair = latinString.charCodeAt(i).toString(16);\n        if (pair.length === 1) pair = '0' + pair;\n        hex += pair;\n      }\n\n      return new BinaryHex(hex);\n    };\n\n    BinaryHex.fromUtf8String = function (utf8String) {\n      var encoded = encodeURIComponent(utf8String);\n      var hex = '';\n\n      for (var i = 0; i < encoded.length; i++) {\n        if (encoded.charAt(i) === '%') {\n          hex += encoded.substring(i + 1, i + 3);\n          i += 2;\n        } else {\n          var hexPair = encoded.charCodeAt(i).toString(16);\n          if (hexPair.length < 2) hexPair = '0' + hexPair;\n          hex += hexPair;\n        }\n      }\n\n      return new BinaryHex(hex);\n    };\n\n    var semanticEncoders = [];\n    var semanticDecoders = {};\n\n    var notImplemented = function (label) {\n      return function () {\n        throw new Error(label + ' not implemented');\n      };\n    };\n\n    function Reader() {}\n\n    Reader.prototype = {\n      peekByte: notImplemented('peekByte'),\n      readByte: notImplemented('readByte'),\n      readChunk: notImplemented('readChunk'),\n      readFloat16: function () {\n        var half = this.readUint16();\n        var exponent = (half & 0x7fff) >> 10;\n        var mantissa = half & 0x3ff;\n        var negative = half & 0x8000;\n\n        if (exponent === 0x1f) {\n          if (mantissa === 0) {\n            return negative ? -Infinity : Infinity;\n          }\n\n          return NaN;\n        }\n\n        var magnitude = exponent ? Math.pow(2, exponent - 25) * (1024 + mantissa) : Math.pow(2, -24) * mantissa;\n        return negative ? -magnitude : magnitude;\n      },\n      readFloat32: function () {\n        var intValue = this.readUint32();\n        var exponent = (intValue & 0x7fffffff) >> 23;\n        var mantissa = intValue & 0x7fffff;\n        var negative = intValue & 0x80000000;\n\n        if (exponent === 0xff) {\n          if (mantissa === 0) {\n            return negative ? -Infinity : Infinity;\n          }\n\n          return NaN;\n        }\n\n        var magnitude = exponent ? Math.pow(2, exponent - 23 - 127) * (8388608 + mantissa) : Math.pow(2, -23 - 126) * mantissa;\n        return negative ? -magnitude : magnitude;\n      },\n      readFloat64: function () {\n        var int1 = this.readUint32(),\n            int2 = this.readUint32();\n        var exponent = int1 >> 20 & 0x7ff;\n        var mantissa = (int1 & 0xfffff) * 4294967296 + int2;\n        var negative = int1 & 0x80000000;\n\n        if (exponent === 0x7ff) {\n          if (mantissa === 0) {\n            return negative ? -Infinity : Infinity;\n          }\n\n          return NaN;\n        }\n\n        var magnitude = exponent ? Math.pow(2, exponent - 52 - 1023) * (4503599627370496 + mantissa) : Math.pow(2, -52 - 1022) * mantissa;\n        return negative ? -magnitude : magnitude;\n      },\n      readUint16: function () {\n        return this.readByte() * 256 + this.readByte();\n      },\n      readUint32: function () {\n        return this.readUint16() * 65536 + this.readUint16();\n      },\n      readUint64: function () {\n        return this.readUint32() * 4294967296 + this.readUint32();\n      }\n    };\n\n    function Writer() {}\n\n    Writer.prototype = {\n      writeByte: notImplemented('writeByte'),\n      result: notImplemented('result'),\n      writeFloat16: notImplemented('writeFloat16'),\n      writeFloat32: notImplemented('writeFloat32'),\n      writeFloat64: notImplemented('writeFloat64'),\n      writeUint16: function (value) {\n        this.writeByte(value >> 8 & 0xff);\n        this.writeByte(value & 0xff);\n      },\n      writeUint32: function (value) {\n        this.writeUint16(value >> 16 & 0xffff);\n        this.writeUint16(value & 0xffff);\n      },\n      writeUint64: function (value) {\n        if (value >= 9007199254740992 || value <= -9007199254740992) {\n          throw new Error('Cannot encode Uint64 of: ' + value + ' magnitude to big (floating point errors)');\n        }\n\n        this.writeUint32(Math.floor(value / 4294967296));\n        this.writeUint32(value % 4294967296);\n      },\n      writeString: notImplemented('writeString'),\n      canWriteBinary: function (chunk) {\n        return false;\n      },\n      writeBinary: notImplemented('writeChunk')\n    };\n\n    function readHeaderRaw(reader) {\n      var firstByte = reader.readByte();\n      var majorType = firstByte >> 5,\n          value = firstByte & 0x1f;\n      return {\n        type: majorType,\n        value: value\n      };\n    }\n\n    function valueFromHeader(header, reader) {\n      var value = header.value;\n\n      if (value < 24) {\n        return value;\n      } else if (value == 24) {\n        return reader.readByte();\n      } else if (value == 25) {\n        return reader.readUint16();\n      } else if (value == 26) {\n        return reader.readUint32();\n      } else if (value == 27) {\n        return reader.readUint64();\n      } else if (value == 31) {\n        return null;\n      }\n\n      notImplemented('Additional info: ' + value)();\n    }\n\n    function writeHeaderRaw(type, value, writer) {\n      writer.writeByte(type << 5 | value);\n    }\n\n    function writeHeader(type, value, writer) {\n      var firstByte = type << 5;\n\n      if (value < 24) {\n        writer.writeByte(firstByte | value);\n      } else if (value < 256) {\n        writer.writeByte(firstByte | 24);\n        writer.writeByte(value);\n      } else if (value < 65536) {\n        writer.writeByte(firstByte | 25);\n        writer.writeUint16(value);\n      } else if (value < 4294967296) {\n        writer.writeByte(firstByte | 26);\n        writer.writeUint32(value);\n      } else {\n        writer.writeByte(firstByte | 27);\n        writer.writeUint64(value);\n      }\n    }\n\n    var stopCode = new Error();\n\n    function decodeReader(reader) {\n      var header = readHeaderRaw(reader);\n\n      switch (header.type) {\n        case 0:\n          return valueFromHeader(header, reader);\n\n        case 1:\n          return -1 - valueFromHeader(header, reader);\n\n        case 2:\n          return reader.readChunk(valueFromHeader(header, reader));\n\n        case 3:\n          var buffer = reader.readChunk(valueFromHeader(header, reader));\n          return buffer.toString('utf-8');\n\n        case 4:\n        case 5:\n          var arrayLength = valueFromHeader(header, reader);\n          var result = [];\n\n          if (arrayLength !== null) {\n            if (header.type === 5) {\n              arrayLength *= 2;\n            }\n\n            for (var i = 0; i < arrayLength; i++) {\n              result[i] = decodeReader(reader);\n            }\n          } else {\n            var item;\n\n            while ((item = decodeReader(reader)) !== stopCode) {\n              result.push(item);\n            }\n          }\n\n          if (header.type === 5) {\n            var objResult = {};\n\n            for (var i = 0; i < result.length; i += 2) {\n              objResult[result[i]] = result[i + 1];\n            }\n\n            return objResult;\n          } else {\n            return result;\n          }\n\n        case 6:\n          var tag = valueFromHeader(header, reader);\n          var decoder = semanticDecoders[tag];\n          var result = decodeReader(reader);\n          return decoder ? decoder(result) : result;\n\n        case 7:\n          if (header.value === 25) {\n            return reader.readFloat16();\n          } else if (header.value === 26) {\n            return reader.readFloat32();\n          } else if (header.value === 27) {\n            return reader.readFloat64();\n          }\n\n          switch (valueFromHeader(header, reader)) {\n            case 20:\n              return false;\n\n            case 21:\n              return true;\n\n            case 22:\n              return null;\n\n            case 23:\n              return undefined;\n\n            case null:\n              return stopCode;\n\n            default:\n              throw new Error('Unknown fixed value: ' + header.value);\n          }\n\n        default:\n          throw new Error('Unsupported header: ' + JSON.stringify(header));\n      }\n\n      throw new Error('not implemented yet');\n    }\n\n    function encodeWriter(data, writer) {\n      for (var i = 0; i < semanticEncoders.length; i++) {\n        var replacement = semanticEncoders[i].fn(data);\n\n        if (replacement !== undefined) {\n          writeHeader(6, semanticEncoders[i].tag, writer);\n          return encodeWriter(replacement, writer);\n        }\n      }\n\n      if (data && typeof data.toCBOR === 'function') {\n        data = data.toCBOR();\n      }\n\n      if (data === false) {\n        writeHeader(7, 20, writer);\n      } else if (data === true) {\n        writeHeader(7, 21, writer);\n      } else if (data === null) {\n        writeHeader(7, 22, writer);\n      } else if (data === undefined) {\n        writeHeader(7, 23, writer);\n      } else if (typeof data === 'number') {\n        if (Math.floor(data) === data && data < 9007199254740992 && data > -9007199254740992) {\n          if (data < 0) {\n            writeHeader(1, -1 - data, writer);\n          } else {\n            writeHeader(0, data, writer);\n          }\n        } else {\n          writeHeaderRaw(7, 27, writer);\n          writer.writeFloat64(data);\n        }\n      } else if (typeof data === 'string') {\n        writer.writeString(data, function (length) {\n          writeHeader(3, length, writer);\n        });\n      } else if (writer.canWriteBinary(data)) {\n        writer.writeBinary(data, function (length) {\n          writeHeader(2, length, writer);\n        });\n      } else if (typeof data === 'object') {\n        if (api.config.useToJSON && typeof data.toJSON === 'function') {\n          data = data.toJSON();\n        }\n\n        if (Array.isArray(data)) {\n          writeHeader(4, data.length, writer);\n\n          for (var i = 0; i < data.length; i++) {\n            encodeWriter(data[i], writer);\n          }\n        } else {\n          var keys = Object.keys(data);\n          writeHeader(5, keys.length, writer);\n\n          for (var i = 0; i < keys.length; i++) {\n            const number = parseInt(keys[i]);\n\n            if (isNaN(number)) {\n              encodeWriter(keys[i], writer);\n              encodeWriter(data[keys[i]], writer);\n            } else {\n              encodeWriter(number, writer);\n              encodeWriter(data[keys[i]], writer);\n            }\n          }\n        }\n      } else {\n        throw new Error('CBOR encoding not supported: ' + data);\n      }\n    }\n\n    var readerFunctions = [];\n    var writerFunctions = [];\n    var api = {\n      config: {\n        useToJSON: true\n      },\n      addWriter: function (format, writerFunction) {\n        if (typeof format === 'string') {\n          writerFunctions.push(function (f) {\n            if (format === f) return writerFunction(f);\n          });\n        } else {\n          writerFunctions.push(format);\n        }\n      },\n      addReader: function (format, readerFunction) {\n        if (typeof format === 'string') {\n          readerFunctions.push(function (data, f) {\n            if (format === f) return readerFunction(data, f);\n          });\n        } else {\n          readerFunctions.push(format);\n        }\n      },\n      encode: function (data, format) {\n        for (var i = 0; i < writerFunctions.length; i++) {\n          var func = writerFunctions[i];\n          var writer = func(format);\n\n          if (writer) {\n            encodeWriter(data, writer);\n            return writer.result();\n          }\n        }\n\n        throw new Error('Unsupported output format: ' + format);\n      },\n      encodeDataItem: function (data, format) {\n        for (var i = 0; i < writerFunctions.length; i++) {\n          var func = writerFunctions[i];\n          var writer = func(format);\n\n          if (writer) {\n            if (data.getTag() !== undefined) {\n              encodeWriter(data, writer);\n              return writer.result();\n            } else {\n              encodeWriter(data.getData(), writer);\n              return writer.result();\n            }\n          }\n        }\n\n        throw new Error('Unsupported output format: ' + format);\n      },\n      decode: function (data, format) {\n        for (var i = 0; i < readerFunctions.length; i++) {\n          var func = readerFunctions[i];\n          var reader = func(data, format);\n\n          if (reader) {\n            return decodeReader(reader);\n          }\n        }\n\n        throw new Error('Unsupported input format: ' + format);\n      },\n      decodeToDataItem: function (data, format) {\n        for (var i = 0; i < readerFunctions.length; i++) {\n          var func = readerFunctions[i];\n          var reader = func(data, format);\n\n          if (reader) {\n            const result = decodeReader(reader);\n\n            if (result instanceof DataItem) {\n              return result;\n            } else {\n              return new DataItem(result);\n            }\n          }\n        }\n\n        throw new Error('Unsupported input format: ' + format);\n      },\n      addSemanticEncode: function (tag, fn) {\n        if (typeof tag !== 'number' || tag % 1 !== 0 || tag < 0) {\n          throw new Error('Tag must be a positive integer');\n        }\n\n        semanticEncoders.push({\n          tag: tag,\n          fn: fn\n        });\n        return this;\n      },\n      addSemanticDecode: function (tag, fn) {\n        if (typeof tag !== 'number' || tag % 1 !== 0 || tag < 0) {\n          throw new Error('Tag must be a positive integer');\n        }\n\n        semanticDecoders[tag] = fn;\n        return this;\n      },\n      Reader: Reader,\n      Writer: Writer\n    };\n\n    function BufferReader(buffer) {\n      this.buffer = buffer;\n      this.pos = 0;\n    }\n\n    BufferReader.prototype = Object.create(Reader.prototype);\n\n    BufferReader.prototype.peekByte = function () {\n      return this.buffer[this.pos];\n    };\n\n    BufferReader.prototype.readByte = function () {\n      return this.buffer[this.pos++];\n    };\n\n    BufferReader.prototype.readUint16 = function () {\n      var result = this.buffer.readUInt16BE(this.pos);\n      this.pos += 2;\n      return result;\n    };\n\n    BufferReader.prototype.readUint32 = function () {\n      var result = this.buffer.readUInt32BE(this.pos);\n      this.pos += 4;\n      return result;\n    };\n\n    BufferReader.prototype.readFloat32 = function () {\n      var result = this.buffer.readFloatBE(this.pos);\n      this.pos += 4;\n      return result;\n    };\n\n    BufferReader.prototype.readFloat64 = function () {\n      var result = this.buffer.readDoubleBE(this.pos);\n      this.pos += 8;\n      return result;\n    };\n\n    BufferReader.prototype.readChunk = function (length) {\n      var result = Buffer.alloc(length);\n      this.buffer.copy(result, 0, this.pos, this.pos += length);\n      return result;\n    };\n\n    function BufferWriter(stringFormat) {\n      this.byteLength = 0;\n      this.defaultBufferLength = 16384;\n      this.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n      this.latestBufferOffset = 0;\n      this.completeBuffers = [];\n      this.stringFormat = stringFormat;\n    }\n\n    BufferWriter.prototype = Object.create(Writer.prototype);\n\n    BufferWriter.prototype.writeByte = function (value) {\n      this.latestBuffer[this.latestBufferOffset++] = value;\n\n      if (this.latestBufferOffset >= this.latestBuffer.length) {\n        this.completeBuffers.push(this.latestBuffer);\n        this.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n        this.latestBufferOffset = 0;\n      }\n\n      this.byteLength++;\n    };\n\n    BufferWriter.prototype.writeFloat32 = function (value) {\n      var buffer = Buffer.alloc(4);\n      buffer.writeFloatBE(value, 0);\n      this.writeBuffer(buffer);\n    };\n\n    BufferWriter.prototype.writeFloat64 = function (value) {\n      var buffer = Buffer.alloc(8);\n      buffer.writeDoubleBE(value, 0);\n      this.writeBuffer(buffer);\n    };\n\n    BufferWriter.prototype.writeString = function (string, lengthFunc) {\n      var buffer = Buffer.from(string, 'utf-8');\n      lengthFunc(buffer.length);\n      this.writeBuffer(buffer);\n    };\n\n    BufferWriter.prototype.canWriteBinary = function (data) {\n      return data instanceof Buffer;\n    };\n\n    BufferWriter.prototype.writeBinary = function (buffer, lengthFunc) {\n      lengthFunc(buffer.length);\n      this.writeBuffer(buffer);\n    };\n\n    BufferWriter.prototype.writeBuffer = function (chunk) {\n      if (!(chunk instanceof Buffer)) throw new TypeError('BufferWriter only accepts Buffers');\n\n      if (!this.latestBufferOffset) {\n        this.completeBuffers.push(chunk);\n      } else if (this.latestBuffer.length - this.latestBufferOffset >= chunk.length) {\n        chunk.copy(this.latestBuffer, this.latestBufferOffset);\n        this.latestBufferOffset += chunk.length;\n\n        if (this.latestBufferOffset >= this.latestBuffer.length) {\n          this.completeBuffers.push(this.latestBuffer);\n          this.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n          this.latestBufferOffset = 0;\n        }\n      } else {\n        this.completeBuffers.push(this.latestBuffer.slice(0, this.latestBufferOffset));\n        this.completeBuffers.push(chunk);\n        this.latestBuffer = Buffer.alloc(this.defaultBufferLength);\n        this.latestBufferOffset = 0;\n      }\n\n      this.byteLength += chunk.length;\n    };\n\n    BufferWriter.prototype.result = function () {\n      var result = Buffer.alloc(this.byteLength);\n      var offset = 0;\n\n      for (var i = 0; i < this.completeBuffers.length; i++) {\n        var buffer = this.completeBuffers[i];\n        buffer.copy(result, offset, 0, buffer.length);\n        offset += buffer.length;\n      }\n\n      if (this.latestBufferOffset) {\n        this.latestBuffer.copy(result, offset, 0, this.latestBufferOffset);\n      }\n\n      if (this.stringFormat) return result.toString(this.stringFormat);\n      return result;\n    };\n\n    if (typeof Buffer === 'function') {\n      api.addReader(function (data, format) {\n        if (data instanceof Buffer) {\n          return new BufferReader(data);\n        }\n\n        if (format === 'hex' || format === 'base64') {\n          var buffer = Buffer.from(data, format);\n          return new BufferReader(buffer);\n        }\n      });\n      api.addWriter(function (format) {\n        if (!format || format === 'buffer') {\n          return new BufferWriter();\n        } else if (format === 'hex' || format === 'base64') {\n          return new BufferWriter(format);\n        }\n      });\n    }\n\n    function HexReader(hex) {\n      this.hex = hex;\n      this.pos = 0;\n    }\n\n    HexReader.prototype = Object.create(Reader.prototype);\n\n    HexReader.prototype.peekByte = function () {\n      var pair = this.hex.substring(this.pos, 2);\n      return parseInt(pair, 16);\n    };\n\n    HexReader.prototype.readByte = function () {\n      var pair = this.hex.substring(this.pos, this.pos + 2);\n      this.pos += 2;\n      return parseInt(pair, 16);\n    };\n\n    HexReader.prototype.readChunk = function (length) {\n      var hex = this.hex.substring(this.pos, this.pos + length * 2);\n      this.pos += length * 2;\n      if (typeof Buffer === 'function') return Buffer.from(hex, 'hex');\n      return new BinaryHex(hex);\n    };\n\n    function HexWriter(finalFormat) {\n      this.$hex = '';\n      this.finalFormat = finalFormat || 'hex';\n    }\n\n    HexWriter.prototype = Object.create(Writer.prototype);\n\n    HexWriter.prototype.writeByte = function (value) {\n      if (value < 0 || value > 255) throw new Error('Byte value out of range: ' + value);\n      var hex = value.toString(16);\n\n      if (hex.length == 1) {\n        hex = '0' + hex;\n      }\n\n      this.$hex += hex;\n    };\n\n    HexWriter.prototype.canWriteBinary = function (chunk) {\n      return chunk instanceof BinaryHex || typeof Buffer === 'function' && chunk instanceof Buffer;\n    };\n\n    HexWriter.prototype.writeBinary = function (chunk, lengthFunction) {\n      if (chunk instanceof BinaryHex) {\n        lengthFunction(chunk.length());\n        this.$hex += chunk.$hex;\n      } else if (typeof Buffer === 'function' && chunk instanceof Buffer) {\n        lengthFunction(chunk.length);\n        this.$hex += chunk.toString('hex');\n      } else {\n        throw new TypeError('HexWriter only accepts BinaryHex or Buffers');\n      }\n    };\n\n    HexWriter.prototype.result = function () {\n      if (this.finalFormat === 'buffer' && typeof Buffer === 'function') {\n        return Buffer.from(this.$hex, 'hex');\n      }\n\n      return new BinaryHex(this.$hex).toString(this.finalFormat);\n    };\n\n    HexWriter.prototype.writeString = function (string, lengthFunction) {\n      var buffer = BinaryHex.fromUtf8String(string);\n      lengthFunction(buffer.length());\n      this.$hex += buffer.$hex;\n    };\n\n    api.addReader(function (data, format) {\n      if (data instanceof BinaryHex || data.$hex) {\n        return new HexReader(data.$hex);\n      }\n\n      if (format === 'hex') {\n        return new HexReader(data);\n      }\n    });\n    api.addWriter(function (format) {\n      if (format === 'hex') {\n        return new HexWriter();\n      }\n    });\n    return api;\n  }();\n\n  CBOR.addSemanticEncode(0, function (data) {\n    if (data instanceof Date) {\n      return data.toISOString();\n    }\n  }).addSemanticDecode(0, function (isoString) {\n    return new Date(isoString);\n  }).addSemanticDecode(1, function (isoString) {\n    return new Date(isoString);\n  });\n  return CBOR;\n});","map":{"version":3,"mappings":"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","names":["global","factory","define","amd","module","exports","CBOR","DataItem","require","BinaryHex","hex","$hex","prototype","length","toString","format","encoded","i","substring","decodeURIComponent","push","parseInt","String","fromCharCode","apply","Error","fromLatinString","latinString","pair","charCodeAt","fromUtf8String","utf8String","encodeURIComponent","charAt","hexPair","semanticEncoders","semanticDecoders","notImplemented","label","Reader","peekByte","readByte","readChunk","readFloat16","half","readUint16","exponent","mantissa","negative","Infinity","NaN","magnitude","Math","pow","readFloat32","intValue","readUint32","readFloat64","int1","int2","readUint64","Writer","writeByte","result","writeFloat16","writeFloat32","writeFloat64","writeUint16","value","writeUint32","writeUint64","floor","writeString","canWriteBinary","chunk","writeBinary","readHeaderRaw","reader","firstByte","majorType","type","valueFromHeader","header","writeHeaderRaw","writer","writeHeader","stopCode","decodeReader","buffer","arrayLength","item","objResult","tag","decoder","undefined","JSON","stringify","encodeWriter","data","replacement","fn","toCBOR","api","config","useToJSON","toJSON","Array","isArray","keys","Object","number","isNaN","readerFunctions","writerFunctions","addWriter","writerFunction","f","addReader","readerFunction","encode","func","encodeDataItem","getTag","getData","decode","decodeToDataItem","addSemanticEncode","addSemanticDecode","BufferReader","pos","create","readUInt16BE","readUInt32BE","readFloatBE","readDoubleBE","Buffer","alloc","copy","BufferWriter","stringFormat","byteLength","defaultBufferLength","latestBuffer","latestBufferOffset","completeBuffers","writeFloatBE","writeBuffer","writeDoubleBE","string","lengthFunc","from","TypeError","slice","offset","HexReader","HexWriter","finalFormat","lengthFunction","Date","toISOString","isoString"],"sourceRoot":"","sources":["../../src/lib/cbor-sync.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}