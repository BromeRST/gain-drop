{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar index_1 = require(\"./index\");\n\nvar CHARSET = 'qpzry9x8gf2tvdw0s3jn54khce6mua7l';\nvar GENERATOR = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\n\nvar polymod = function (values) {\n  var chk = 1;\n\n  for (var p = 0; p < values.length; ++p) {\n    var top_1 = chk >> 25;\n    chk = (chk & 0x1ffffff) << 5 ^ values[p];\n\n    for (var i = 0; i < 6; ++i) {\n      if (top_1 >> i & 1) {\n        chk ^= GENERATOR[i];\n      }\n    }\n  }\n\n  return chk;\n};\n\nvar hrpExpand = function (hrp) {\n  var ret = [];\n  var p;\n\n  for (p = 0; p < hrp.length; ++p) {\n    ret.push(hrp.charCodeAt(p) >> 5);\n  }\n\n  ret.push(0);\n\n  for (p = 0; p < hrp.length; ++p) {\n    ret.push(hrp.charCodeAt(p) & 31);\n  }\n\n  return ret;\n};\n\nvar verifyChecksum = function (hrp, data, version) {\n  var header;\n\n  if (hrp) {\n    header = hrpExpand(hrp);\n  } else {\n    header = [0];\n  }\n\n  var check = version === index_1.Bech32Version.Origin ? 1 : 0x3fffffff;\n  return polymod(header.concat(data)) === check;\n};\n\nvar createChecksum = function (hrp, data, bech32Version) {\n  var values;\n\n  if (hrp) {\n    values = hrpExpand(hrp).concat(data).concat([0, 0, 0, 0, 0, 0]);\n  } else {\n    values = [0].concat(data).concat([0, 0, 0, 0, 0, 0]);\n  }\n\n  var chk = bech32Version === index_1.Bech32Version.Origin ? 1 : 0x3fffffff;\n  var mod = polymod(values) ^ chk;\n  var ret = [];\n\n  for (var p = 0; p < 6; ++p) {\n    ret.push(mod >> 5 * (5 - p) & 31);\n  }\n\n  return ret;\n};\n\nvar encode = function (hrp, data, version) {\n  var combined = data.concat(createChecksum(hrp, data, version));\n  var ret;\n\n  if (hrp) {\n    ret = hrp + '1';\n  } else {\n    ret = '';\n  }\n\n  for (var p = 0; p < combined.length; ++p) {\n    ret += CHARSET.charAt(combined[p]);\n  }\n\n  return ret;\n};\n\nvar decodeBc32 = function (bechString) {\n  var data = [];\n\n  for (var p = 0; p < bechString.length; ++p) {\n    var d = CHARSET.indexOf(bechString.charAt(p));\n\n    if (d === -1) {\n      return null;\n    }\n\n    data.push(d);\n  }\n\n  if (!verifyChecksum(undefined, data, index_1.Bech32Version.bis)) {\n    return null;\n  }\n\n  return {\n    hrp: null,\n    data: data.slice(0, data.length - 6)\n  };\n};\n\nvar decode = function (bechString) {\n  var p;\n  var hasLower = false;\n  var hasUpper = false;\n\n  for (p = 0; p < bechString.length; ++p) {\n    if (bechString.charCodeAt(p) < 33 || bechString.charCodeAt(p) > 126) {\n      return null;\n    }\n\n    if (bechString.charCodeAt(p) >= 97 && bechString.charCodeAt(p) <= 122) {\n      hasLower = true;\n    }\n\n    if (bechString.charCodeAt(p) >= 65 && bechString.charCodeAt(p) <= 90) {\n      hasUpper = true;\n    }\n  }\n\n  if (hasLower && hasUpper) {\n    return null;\n  }\n\n  bechString = bechString.toLowerCase();\n  var pos = bechString.lastIndexOf('1');\n\n  if (pos === -1) {\n    return decodeBc32(bechString);\n  }\n\n  if (pos < 1 || pos + 7 > bechString.length || bechString.length > 90) {\n    return null;\n  }\n\n  var hrp = bechString.substring(0, pos);\n  var data = [];\n\n  for (p = pos + 1; p < bechString.length; ++p) {\n    var d = CHARSET.indexOf(bechString.charAt(p));\n\n    if (d === -1) {\n      return null;\n    }\n\n    data.push(d);\n  }\n\n  if (!verifyChecksum(hrp, data, index_1.Bech32Version.Origin)) {\n    return null;\n  }\n\n  return {\n    hrp: hrp,\n    data: data.slice(0, data.length - 6)\n  };\n};\n\nexports.default = {\n  encode: encode,\n  decode: decode\n};","map":{"version":3,"mappings":"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","names":["CHARSET","GENERATOR","polymod","values","chk","p","length","top_1","i","hrpExpand","hrp","ret","push","charCodeAt","verifyChecksum","data","version","header","check","index_1","Origin","concat","createChecksum","bech32Version","mod","encode","combined","charAt","decodeBc32","bechString","d","indexOf","undefined","bis","slice","decode","hasLower","hasUpper","toLowerCase","pos","lastIndexOf","substring","exports"],"sourceRoot":"","sources":["../src/bech32.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}